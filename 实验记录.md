GSM8k

SL 256 --LIMIT 100

pure_llada:: ACC: 66, SRR: 1, Tps: 0.42 



| 3-phase | threshold=0.25                 |         marginal ds 0.3         | marginal ds 0.4 |
| ------- | ------------------------------ | :-----------------------------: | --------------- |
| N=2     | acc57, SRR3.71, Tps1.63(3.88X) |         acc53, SRR2.43          |                 |
| N=3     | acc61, SRR4.86, Tps2.09(4.98X) |         acc60, SRR2.99          |                 |
| N=4     | acc63, SRR6.08, Tps2.62(6.24X) |         acc61, SRR3.74          | acc67, SRR3.82  |
| N=5     | acc63, SRR7.18, Tps3.10(7.38X) |         acc58, SRR4.56          | acc59, SRR4.59  |
| N=6     | acc65, SRR8.15, Tps3.58(8.52X) |         acc63, SRR5.06          | acc68, SRR5.20  |
| N=7     | acc67, SRR8.79, Tps3.79(9.02X) |         acc61, SRR5.7,          | acc60, SRR5.68  |
| N=8     | acc64, SRR9.51, Tps4.10(9.76X) | acc66, SRR6.11, Tps42.81(6.16X) | acc62, SRR6.01  |
| N=32    | acc34                          |                                 |                 |



| PR weight              | score          | ---------------------------------- |
| ---------------------- | -------------- | :--------------------------------: |
| initial_min_weight=0.1 | acc73, Tps0.43 |                                    |
| initial_min_weight=0.0 | acc74, Tps0.42 |                                    |



| 3-phase + PR weight (exp) | initial_min_weight=0.0, ur_factor=1.0 | ---------------------------------- |
| ------------------------- | ------------------------------------- | :--------------------------------: |
| N=3                       | acc66, SRR5.11, Tps2.20(5.24X)        |                                    |
| N=4                       | acc66, SRR6.34, Tps2.75(6.55X)        |                                    |
| N=5                       | acc67, SRR7.12, Tps3.08(7.33X)        |                                    |
| N=6                       | acc66, SRR7.78, Tps3.33(7.93X)        |                                    |
| N=7                       | acc61, SRR8.52, Tps3.67(8.74X)        |                                    |



| 3-phase + PR weight (exp + acc) | initial_min_weight=0.0, ur_factor=1.2 | ---------------------------------- |
| ------------------------------- | ------------------------------------- | :--------------------------------: |
| N=2                             | acc64, SRR3.81, Tps1.64(3.90X)        |                                    |
| N=3                             | acc66, SRR5.13, Tps2.21(5.26X)        |                                    |
| N=4                             | acc71, SRR6.38, Tps2.75(6.55X)        |                                    |
| N=5                             | acc70, SRR7.20, Tps3.11(7.40X)        |                                    |
| N=6                             | acc69, SRR7.87, Tps3.89(9.26X)        |                                    |
| N=7                             | acc63, SRR8.47, Tps3.61(8.60X)        |                                    |
| N=8                             | acc65, SRR8.91, Tps3.85(9.17X)        |                                    |



| 3-phase + PA weight (exp) | initial_min_weight=0.0         | ---------------------------------- |
| ------------------------- | ------------------------------ | :--------------------------------: |
| N=3                       | acc68, SRR4.83, Tps2.08(4.95X) |                                    |
| N=4                       | acc74, SRR5.79, Tps2.50(5.95X) |                                    |
| N=5                       | acc66, SRR6.61, Tps2.85(6.79X) |                                    |
| N=6                       | acc70, SRR7.74, Tps3.35(7.98X) |                                    |
| N=7                       | acc70, SRR8.52, Tps3.68(8.76X) |                                    |
| N=8                       | acc65, SRR9.04, Tps3.92(9.33X) |                                    |





Gsk8k: 4-shot

HumanEval: 0-shot

MBPP: 3-shot

## Old Results

### LLaDA non-ar + PW

initial_min_weight = 0.0

| Task      | Score | metrics |
| --------- | ----- | ------- |
| Gsm8K     | 75.59 |         |
| HumanEval | 36.59 |         |
| MBPP      | 27.6  |         |
| Math500   |       |         |



### DiCo

SL256

**Gsm8K (MD0.4)**

| N    | Score | metrics           |
| ---- | ----- | ----------------- |
| 8    | 60.73 | SRR6.11, TPS41.74 |
| 7    | 61.84 | SRR5.69, Tps39.02 |
| 6    | 64.29 | SRR5.17, Tps35.46 |
| 5    | 61.94 | SRR4.57, Tps31.44 |

**Gsm8k (MD0.3)**

| N    | Score | metrics           |
| ---- | ----- | ----------------- |
| 8    | 60.80 | SRR6.10, TPS41.71 |
| 7    |       |                   |
| 6    | 64.29 | SRR5.16, Tps35.41 |
| 5    |       |                   |



### DiCo+

#### SL256

##### Gsm8k (MD0.4)

| N    | Score   | metrics           |
| ---- | ------- | ----------------- |
| 8    | 63.91 * | SRR6.09, Tps41.76 |
| 7    | 65.73 * | SRR5.66, Tps38.73 |
| 6    | 65.28   | SRR5.16, Tps35.37 |
| 5    | 64.52   | SRR4.52, Tps31.07 |
| 4    | 65.88   | SRR3.93, Tps27.01 |
| 3    | 62.85   | SRR3.24, Tps22.28 |
| 2    | 62.09   | SRR2.55, Tps17.62 |

-- Gsm8k (MD0.4) mopup1

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 7    | 64.29 | SRR4.61, Tps31.74 |
| 6    | 65.73 | SRR4.15, Tps28.60 |
| 5    | 65.35 | SRR3.76, Tps25.91 |
| 4    | 64.52 |                   |

#### HumanEval

w in Exp_only

| N    | Score   | Metrics            |
| ---- | ------- | ------------------ |
| 1    | 37.8    | SRR2.39, Tps43.50  |
| 2    | 20.73   | SRR4.35, Tps77.73  |
| 3    | 24.39   | SRR5.41, Tps96.02  |
| 4    | 21.95   | SRR6.09, Tps107.02 |
| 5    | 22.56   | SRR6.92, Tps122.40 |
| 6    | 23.17   | SRR7.53, Tps130.95 |
| 7    | 24.39   | SRR8.07, Tps141.19 |
| 8    | 23.17 * | SRR8.34, Tps143.23 |

w in both Exp and Acc

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    | 35.98 | SRR0.96, Tps17.8  |
| 2    | 25.61 | SRR1.51, Tps26.92 |
| 3    | 26.83 | SRR2.23, Tps39.58 |
| 4    | 26.83 | SRR2.83, Tps49.97 |
| 5    | 26.22 | SRR3.49, Tps61.31 |
| 6    | 22.56 | SRR4.28, Tps74.61 |
| 7    | 23.17 | SRR4.99, Tps86.10 |
| 8    | 25.61 | SRR5.71, Tps91.44 |

#### MBPP

w in Exp_only

| N    | Score  | Metrics           |
| ---- | ------ | ----------------- |
| 1    | 27.6   | SRR2.34, Tps19.63 |
| 2    | 25.2   | SRR4.09, Tps33.86 |
| 3    | 25     | SRR4.88, Tps40.25 |
| 4    | 27.2 * | SRR5.97, Tps49.10 |
| 5    | 25.8   | SRR6.94, Tps56.33 |
| 6    | 24.8   | SRR7.63, Tps62.23 |
| 7    | 25.4 * | SRR8.30, Tps67.11 |
| 8    | 23     | SRR8.66, Tps70.61 |

#### Math-500

| N    | Score  | Metrics           |
| ---- | ------ | ----------------- |
| 1    | 37.4   | SRR1.70, Tps14.91 |
| 2    | 31     | SRR2.17, Tps19.02 |
| 3    | 31.2   | SRR2.73, Tps24.01 |
| 4    | 33.6 * | SRR3.39, Tps29.78 |
| 5    | 31.6   | SRR3.92, Tps34.37 |
| 6    | 27.4   | SRR4.39, Tps38.40 |
| 7    | 29.2   | SRR4.80, Tps41.96 |
| 8    | 29.8 * | SRR5.18, Tps45.20 |



## semi-ar

### LLaDA baseline

#### SL256

##### BL64

| Task      | Score | metrics |
| --------- | ----- | ------- |
| Gsm8k     | 76.80 | Tps6.99 |
| HumanEval |       |         |
| MBPP      |       |         |
| Math-500  |       |         |

##### BL128

| Task      | Score | metrics  |
| --------- | ----- | -------- |
| Gsm8k     | 73.16 | Tps6.98  |
| HumanEval | 28.05 | Tps18.39 |
| MBPP      | 27.80 | Tps8.25  |
| Math-500  | 37.00 | Tps8.82  |

##### BL256

| Task      | Score | metrics |
| --------- | ----- | ------- |
| Gsm8k     | 56.33 | Tps6.94 |
| HumanEval | 12.8  | Tps丢了 |
| MBPP      | 14.6  | Tps8.23 |
| Math-500  | 25.2  | Tps8.77 |

max

| Task          | Score | metrics |
| ------------- | ----- | ------- |
| Gsm8k         |       |         |
| HumanEval(BL) |       |         |
| MBPP          |       |         |
| Math-500      |       |         |
|               |       |         |

**HumanEval** (SL256)

| Blcok__length | Score | metrics |
| ------------- | ----- | ------- |
| 32            | 40.24 |         |
| 64            | 39.63 |         |
| 128           | 28.05 |         |



#### SL512

##### BL512

| Task      | Score | metrics |
| --------- | ----- | ------- |
| Gsm8k     | 27.52 |         |
| HumanEval | 13.41 |         |
| MBPP      |       |         |
| Math      |       |         |
|           |       |         |

### Fixed Threshold

#### SL256

##### BL32

| dataset   | Score | Metris            |
| --------- | ----- | ----------------- |
| Gsm8K     | 78.24 | SRR3.32, Tps24.60 |
| HumanEval |       |                   |
| MBPP      |       |                   |
| Math-500  |       |                   |

##### BL64

| dataset   | Score | Metris            |
| --------- | ----- | ----------------- |
| Gsm8K     |       |                   |
| HumanEval | 39.02 | SRR2.75, Tps50.89 |
| MBPP      |       |                   |
| Math-500  |       |                   |

**GSM8K(SL256, BL64)**

| Blcok__length   | Score | metrics           |
| --------------- | ----- | ----------------- |
| 32              |       |                   |
| 64 (acc_tr0.9)  | 79    | SRR3.40, Tps23.13 |
| 64 (acc_tr0.95) | 79.15 | SRR2.81, Tps19.10 |
| 128             |       |                   |

**HumanEval(SL256, BL64)**

##### BL128

| dataset   | Score | Metris            |
| --------- | ----- | ----------------- |
| Gsm8K     | 73.46 | SRR3.29, Tps22.57 |
| HumanEval | 26.22 | SRR3.86, Tps68.14 |
| MBPP      | 26.22 | SRR3.86, Tps69.88 |
| Math-500  |       |                   |

##### BL256

threshold=0.9

| dataset   | Score | Metris             |
| --------- | ----- | ------------------ |
| Gsm8K     | 55.34 | SRR2.88, Tps19.89  |
| HumanEval | 10.98 | SRR6.25, Tps114.18 |
| MBPP      | 14.6  | SRR3.03, Tps24.91  |
| Math-500  | 25    | SRR2.37, Tps20.33  |

threshold=0.95

| dataset   | Score | Metris            |
| --------- | ----- | ----------------- |
| Gsm8K     | 57.01 | SRR2.34, Tps16.18 |
| HumanEval | 12.8  | SRR4.12, Tps74.62 |
| MBPP      | 14.6  | SRR2.60, Tps21.30 |
| Math-500  | 25.0  | SRR2.02, Tps17.65 |

### Factor

#### SL256

##### BL32

| dataset   | Score | Metris            |
| --------- | ----- | ----------------- |
| Gsm8K     | 77.79 | SRR4.26, Tps29.15 |
| HumanEval | 40.24 | SRR3.34, Tps61.35 |
| MBPP      |       |                   |
| Math-500  |       |                   |

##### BL64

| dataset   | Score | Metris            |
| --------- | ----- | ----------------- |
| Gsm8K     | 77.71 | SRR4.47, Tps30.35 |
| HumanEval | 40.85 | SRR3.65, Tps66.91 |
| MBPP      |       |                   |
| Math-500  |       |                   |



**HumanEval(SL256, BL64)**

##### BL128

| dataset   | Score | Metris            |
| --------- | ----- | ----------------- |
| Gsm8K     | 73.24 | SRR4.49, Tps30.73 |
| HumanEval | 30.49 | SRR5.32, Tps95,71 |
| MBPP      |       |                   |
| Math-500  |       |                   |

##### BL256

factor=1

| dataset   | Score | Metris             |
| --------- | ----- | ------------------ |
| Gsm8K     | 58.23 | SRR4.15, Tps28.77  |
| HumanEval | 13.41 | SRR8.06, Tps146.24 |
| MBPP      | 12    | SRR3.70, Tps30.    |
| Math-500  | 24.2  | SRR3.18, Tps27.56  |

### DiCo+

w in Exp_only

factor

#### SL128

**sudoku**

| N    | Score | Metrics            |
| ---- | ----- | ------------------ |
| 1    | 40.0  | SRR4.95, Tps84.43  |
| 2    | 31.4  | SRR7.29, Tps120.91 |



#### SL256

##### BL32

**HumanEval**

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    | 38.41 | SRR1.56, Tps28.22 |
| 2    |       |                   |

##### **BL64**

===> p3+版

=== use fixed threshold

**GSM8K**

 (mptr=3, acc_tr=0.9, exp_tr=0.1)

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    | 76.95 | SRR2.44, Tps15.46 |
| 2    | 74.53 | SRR3.01, Tps20.37 |
| 3    | 71.04 | SRR4.15, Tps28.21 |
| 4    | 69.07 | 无意义            |

 (mptr=3, acc_tr=0.9, exp_tr=0.25)

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    | 77.71 | SRR2.25, Tps15.26 |
| 2    | 74.91 | SRR3.05, Tps20.66 |

=====> dicoplus

dicodyna-margin (ur = 1)

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    | 77.41 | SRR3.03, Tps20.76 |
| 3    | 74.00 | SRR3.99, Tps27.25 |
| 4    |       |                   |

dicodyna-margin(ur = 0.5)

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 3    | 75.21 | SRR3.66, Tps25.15 |
| 8    | 74.00 | SRR3.99, Tps27.25 |

**HumanEval**

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    | 40.85 | SRR1.91, Tps34.48 |
| 2    | 29.27 | 无意义            |

dicodyna-margin(ur = 0.5)

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    | 41.46 | SRR2.49, Tps45.44 |
| 2    | 40.24 | SRR3.09, Tps56.01 |
| 4    | 40.24 | SRR3.17, Tps58.19 |
| 8    | 40.24 | SRR3.21, Tps58.34 |

**MBPP**



**MATH-500**



##### **BL128**

**GSM8K**

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    | 76.42 | SRR3.07, Tps20.86 |
| 2    | 70.20 | SRR3.97, Tps26.92 |
| 3    | 69.98 | SRR4.89, Tps33.11 |
| 4    | 67.78 | SRR5.70, Tps38.52 |
| 5    |       |                   |
| 6    |       |                   |
| 7    |       |                   |
| 8    | 62.70 |                   |

===> dicoplus

PWTratio_DVDonly_imw0.05_ur1.0_/gsm8k/SL256_BL128/N3E5_gate0.8_factor1_exptr0.3_acctr0.9_mptr3/

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    | 75.82 | SRR3.02, Tps20.73 |
| 2    | 71.49 | SRR3.52, Tps24.22 |
| 3    | 71.34 | SRR3.77, Tps25.90 |
| 4    | 71.65 | SRR3.92, Tps26.67 |

dicodyna-conf

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    |       |                   |
| 2    |       |                   |
| 3    | 72.25 | SRR4.25, Tps28.30 |
| 4    |       |                   |

dicodyna-margin (ur = 1)

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    | 76.80 | SRR3.11, Tps21.27 |
| 2    | 71.80 | SRR3.87, Tps26.42 |
| 3    | 72.25 | SRR4.11, Tps27.89 |
| 4    | 71.80 | SRR4.18, Tps28.54 |

dicodyna-margin (ur = 0.5)

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    |       |                   |
| 2    |       |                   |
| 3    |       |                   |
| 4    | 75.21 | SRR3.74, Tps25.63 |

PWTnone

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 3    | 69.14 | SRR4.28, Tps29.56 |

**humaneval**

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    | 35.98 | SRR1.62, Tps29.54 |
| 2    | 26.83 | SRR2.60, Tps46.37 |
| 3    | 20.73 | SRR3.58, Tps63.17 |
| 4    | 25.61 | SRR4.12, Tps72.17 |
| 5    | 18.9  | SRR5.02, Tps86.52 |

dicodyna-margin (ur = 0.5)

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    | 39.63 | SRR3.01, Tps54.69 |
| 2    | 37.8  | SRR3.37, Tps61.14 |
| 4    | 37.2  | SRR3.45, Tps62.94 |
| 8    | 37.2  | SRR3.48, Tps63.64 |

##### BL256

exp_tr=0.25, factor=1, gate=0.8, mptr=3

**GSM8K**

| N             | Score          | Metrics                                |
| ------------- | -------------- | -------------------------------------- |
| 1             | 72.40          | SRR3.15, Tps21.28                      |
| 2             | 57.59          | SRR3.91, Tps26.50                      |
| 3             | 58.91          | SRR5.04, Tps34.44                      |
| 4             | 64.06          | SRR6.02, Tps40.62                      |
| 5 (->gate0.9) | 63.38(->62.85) | SRR6.73, Tps45.41(->SRR6.06, Tps40.97) |
| 6             | 62.77          | SRR7.36, Tps49.56                      |
| 7             | 63.00          | SRR7.71, Tps51.84                      |
| 8             | 62.77          | SRR8.19, Tps54.97                      |

dicodyna-margin (ur = 0.5)

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    |       |                   |
| 8    | 75.13 | SRR3.43, Tps23.46 |

**HumanEval**

dicodyna-margin (ur = 0.5) factor

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    | 28.66 | SRR4.29, Tps77.41 |
| 2    |       |                   |
| 4    | 29.88 | SRR4.84, Tps86.85 |
| 8    | 29.27 | SRR4.95, Tps88.55 |

**MBPP**

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    | 31.8  | SRR3.75, Tps30.17 |
| 2    |       |                   |
| 4    | 31.4  | SRR3.85, Tps31.00 |
| 8    | 31.4  | SRR3.85, Tps31.02 |

#### SL512

##### BL128

| N    | Score | Metrics           |
| ---- | ----- | ----------------- |
| 1    | 32.93 | SRR2.75, Tps32.32 |
| 2    | 21.95 | SRR3.67, Tps42.37 |
| 3    | 17.68 |                   |
| 4    | 24.39 |                   |



## tiny experiments



### Observation 1 

gsm8k SL256 0-shot 

| topk | score | Metrics   |
| ---- | ----- | --------- |
| 1    | 52.92 | Tps21.22  |
| 2    | 50.04 | Tps41.33  |
| 3    | 47.16 | Tps61.55  |
| 4    | 44.81 | Tps82.66  |
| 5    | 42.38 | Tps101.85 |
| 6    | 41.55 | Tps122.87 |

mbpp SL128 0-shot

| topk | score | Metrics   |
| ---- | ----- | --------- |
| 1    | 8.2   | Tps24.02  |
| 2    | 7.6   | Tps48.07  |
| 3    | 9.8   | Tps71.59  |
| 4    | 8.4   | Tps96.64  |
| 5    | 4.6   | Tps118.81 |
| 6    | 4.8   | Tps140.21 |

humaneval SL258 0-shot

...

math-500 0-shot

| topk | Score | Metrics   |
| ---- | ----- | --------- |
| 1    | 25.8  | Tps19.93  |
| 2    | 25.4  | Tps39/83  |
| 3    | 25    | Tps59.23  |
| 4    | 22.2  | Tps79.90  |
| 5    | 21.2  | Tps98.50  |
| 6    | 19    | Tps119.10 |



## 按数据集

同setting对比高就行，点到为止

先一组结果超越

可以有弱点

会议扩期刊



056机跑baseline, 190机跑fast-dllm和dico

57.01  SRR2.34, Tps16.18

### 256/256*

| dataset   | llada_instruct  | fixed conf (0.95)         | factor (1.0) | dico+ (ur=0.5, N=8)            |
| --------- | --------------- | ------------------------- | ------------ | ------------------------------ |
| GSM8K     | 56.33 (Tps6.94) | 57.01 (SRR2.34, Tps16.18) | -            | **75.13 (SRR3.43, Tps23.46) ** |
| HumanEval | 12.8 (Tps18.36) | 12.8 (SRR4.12, Tps74.62)  | -            | **29.27 (SRR4.95, Tps88.55) ** |
| MBPP      | 14.6 (Tps8.23)  | 14.6 (SRR2.60, Tps21.30)  | -            | **31.4 (SRR3.85, Tps31.02) **  |
| MATH-500  | 25.2 (Tps8.77)  | 25.0 (SRR2.02, Tps17.65)  | -            | **36.6 (SRR2.70, Tps23.19) **  |

### 128/256*

| dataset   | llada_instruct   | fixed conf (0.95)         | factor (1.0) | dico+ (ur=0.5, N=4)            |
| --------- | ---------------- | ------------------------- | ------------ | ------------------------------ |
| GSM8K     | 73.16 (Tps6.97)  | 72.86 (SRR2.69, Tps18.53) | -            | **75.21 (SRR3.74, Tps25.63)**  |
| HumanEval | 28.05 (Tps18.39) | 26.83 (SRR2.99, Tps54.01) | -            | **37.20 (SRR3.45, Tps62.94) ** |
| MBPP      | 27.80 (Tps8.25)  | 28.00 (SRR3.22, Tps26.66) | -            | **28.60 (SRR3.78, Tps31.02) ** |
| MATH-500  | 37.00 (Tps8.82)  | 37.00 (SRR2.22, Tps19.44) | -            | **38.00 (SRR2.98, Tps25.89) ** |

sudoku, countdown





### 64/256

| dataset   | llada_instruct | fixed conf (0.9)                     | factor (1.0)    | dico+ (ur0.5)         |
| --------- | -------------- | ------------------------------------ | --------------- | --------------------- |
| GSM8K     |                | 79 (SRR3.40); 79.15 (SRR2.81) [0.95] | 77.71 (SRR4.47) | 75.21 (SRR3.66) [N=3] |
| HumanEval | 40.24          | 39.02 (SRR2.75)                      | 40.85 (SRR3.65) | 40.24 (SRR3.17) [N=4] |
| MBPP      |                |                                      |                 |                       |
| MATH-500  |                |                                      |                 |                       |

### 32/256

| dataset   | llada_instruct | fixed conf (0.9) | factor (1.0) | dico+ (ur0.5) |
| --------- | -------------- | ---------------- | ------------ | ------------- |
| GSM8K     |                |                  |              |               |
| HumanEval |                |                  |              |               |
| MBPP      |                |                  |              |               |
| MATH-500  |                |                  |              |               |



